# 工单

## 流程

1. 从"检测记录"页面点击"生成报告"
2. 进入"检测报告"页面
    1. 包括数个检测项, 每个不合格的检测项中包含推荐项目(维修建议)
    2. 底部点击"编辑工单"
3. 进入"编辑工单"页面
    - 从上往下分为3个板块
    - 第1个板块 客户及车辆信息 (每辆车对应一个工单)
    - 第2个板块 维保项目
    - 第3个板块 推荐项目(从检测报告导入的推荐项目(换机油等) + 默认推荐项目(标准洗车等)) 和自定义按钮
      - 该板块数据可修改且具备独立性
      - 点击推荐项目如"换机油", 维保项目下会增加对应的表格, 表格内容包括项目名称、子项内容、子项价格、项目总价
      - 点击推荐项目如"标准洗车", 维保项目下会增加对应的表格, 表格内容包括项目名称、项目内容、项目价格
      - 点击自定义, 在弹窗中编辑项目名称、子项内容、子项价格, 完成后添加到维保项目板块下, 自动计算项目总价
      - 最后计算工单总价
    - 底部是"保存工单"

## 其他

从其他页面点击创建工单, 也可直接进入"编辑工单"页面
数据库增加价格清单表, 字段包括推荐项目id, 推荐项目名称、子项名称、子项价格




## 总结

1. 检测报告
         - 从检测记录进入
         - 上半区: 检测报告
                 - 包括多个检测项, 对于不合格的检测项提供维修建议, 右上角可"分享"
         - 下半区: 推荐工单  
                 - 包括多项维修建议
                         - 类型1 项目名称、各子项内容、各子项价格、项目总价
                         - 类型2 项目名称、项目内容、项目价格
                 - 计算工单总价
                 - 底部: "需要"/"不需要"
                         - 点击需要, 跳转到工单详情, 生成的工单状态为"进行中", 工单id绑定到报告id
                         - 点击不需要, 跳转到其他页面, 生成的工单状态为"已关闭", 工单id绑定到报告id

2. 我的工单
         - 从首页进入
         - 结构为选项卡列表, 每个选项卡对应一个工单
         - 按工单创建时间的逆序排序
         - 每个选项卡的右上角按不同颜色标识工单状态(进行中-黄色/已完成-绿色/已关闭-灰色)
         - 对于"已完成"订单, 只有付款后(例如员工拍照上传收款凭证)才会直接跳转到"已关闭"状态

3. 工单详情(进行中)
         - 从检测报告/首页进入
         - 上半区:
                 - 客户及车辆信息(导入/填写)
                 - 右上角"查看报告" (判断工单id是否存在绑定的报告id, 不存在就不能查看)
4. 工单详情(已完成)

5. 工单详情(已关闭)
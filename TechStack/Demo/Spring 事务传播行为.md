# Spring 事务传播行为

## REQUIRED（默认）

- **描述**：如果当前存在事务，则加入该事务；如果当前没有事务，则创建一个新的事务。
- **适用场景**：适用于大多数情况，特别是当一个事务方法被另一个事务方法调用时。
- **例子**：一个服务方法被多个其他服务方法调用，其中一些可能已经在事务中，而另一些可能没有。

## REQUIRES_NEW

- **描述**：总是创建一个新的事务，如果当前存在事务，则将当前事务挂起(暂停并等待新事务完成后恢复)。
- **适用场景**：当你需要一个操作与当前的事务环境完全独立时。
- **例子**：记录审计日志时，即使主业务逻辑失败并回滚，你也希望日志记录能够保留。

## SUPPORTS

- **描述**：如果当前存在事务，则加入该事务；如果当前没有事务，则以非事务方式执行。
- **适用场景**：当方法既可以在事务环境中运行，也可以在无事务环境中运行时。
- **例子**：读取操作，不修改数据，不需要事务环境，但如果在事务中调用，也能适应。

## NOT_SUPPORTED

- **描述**：总是以非事务方式执行，如果当前存在事务，则将当前事务挂起(暂停并等待新事务完成后恢复)。
- **适用场景**：当方法不应该在事务环境中运行时。
- **例子**：长时间运行的批处理作业或复杂查询，可能因为事务而影响性能。

## MANDATORY

- **描述**：如果当前存在事务，则加入该事务；如果当前没有事务，则抛出异常。
- **适用场景**：当方法必须在事务环境中运行时。
- **例子**：特定的业务逻辑校验或后处理步骤，它们必须作为整个业务操作的一部分进行。

## NEVER

- **描述**：总是以非事务方式执行，如果当前存在事务，则抛出异常。
- **适用场景**：当方法绝对不能在事务环境中运行时。
- **例子**：非事务性的初始化或清理代码。

## NESTED

- **描述**：如果当前存在事务，则在嵌套事务内执行；如果当前没有事务，则表现与 REQUIRED 相同。
- **适用场景**：当你需要在现有事务中启动一个嵌套事务，该嵌套事务可以独立于外部事务回滚。(父事务回滚会连带子事务回滚, 子事务回滚不会影响父事务)
- **例子**：在一个大事务中，某个特定的业务逻辑部分可能由于业务规则而需要单独回滚。
